<!--This page contains Tiny MC editor and allows the user to publish a post-->
<% 
    var titleError = '', slugError = '';

    if(typeof(errors) != 'undefined') {
        for(var error of errors) {
            switch(error.param) {
                case 'pageTitle': 
                    pageTitle = error.value;
                    titleError = error.msg;
                break;
                case 'postslug': 
                    postslug = error.value;
                    slugError = error.msg;
                break;
            }
        }
    }
%>
<%- include('layouts/head') -%>
<%- include('layouts/header'); -%>

<body>
    <%- include('layouts/adminpanel'); -%>
    <form class="pageEditor" method="POST" action="publishpost" enctype="multipart/form-data">
        <label>Page Title</label>
        <input name="pageTitle" id="pageTitle" type="text" value="<%= draft.title %>">
        <p class="addPostError"><%= titleError %></p>

        <label>Hero Image</label>
        <input type="file" id="heroImage" name="heroImage">

        <textarea name="content" id="content" value="<%= draft.content %>"></textarea><br>

        <label>Slug</label>
        <input name="postslug" id="postslug" type="text" value="<%= draft.slug %>">
        <p class="addPostError"><%= slugError %></p>

        <input type="submit" value="Publish">
    </form>
</body>
<%- include('layouts/footer'); -%>